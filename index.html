<!DOCTYPE html>
<html>
  <head>
    <title>Birth of the Ferris keyboard</title>
    <meta charset="utf-8">
    <style>
	body {
        font-family: 'Hack Nerd Font Mono';
        color: black;
        max-width: 90%;
      }
	  
	  h1, h2 {
        font-family: 'Hack Nerd Font Mono';
        max-width: 95%;
      }
      h3 {
        font-family: 'Hack Nerd Font Mono';
        max-width: 90%;
      }
      .remark-code, .remark-inline-code {
        font-family: 'Hack Nerd Font Mono';
        width: 100%;
      }
      .black_text {
        color: black;
        max-width: 90%;
      }
      .gray_text {
        color: gray;
        max-width: 90%;
      }
      .red_text {
        color: #C14566;
        max-width: 90%;
      }
      .white_text {
        color: white;
        max-width: 90%;
      }
      .remark-code-line-highlighted {
         background-color: purple;
      }
      .remark-code-span-highlighted {
         background-color: #f0572a;
      }
      .fitted-pic img {
        height: auto;
        width: auto;
        position: center;
		float: center;
        max-height: 500px;
        max-width: 100%;
      }
      .small-pic img {
        height: auto;
        width: auto;
        max-height: 100px;
        max-width: 350px;
      }
      .tiny-pic img {
        height: auto;
        width: auto;
        max-height: 35px;
        max-width: 35px;
      }
      .logo img {
        height: auto;
        width: auto;
        max-height: 35px;
        position: absolute;
        top: 8%;
        left: 1.7%;
      }
      .left-column50 {
        width: 50%;
        float: left;
      }
      .right-column50 {
        width: 50%;
        float: right;
      }
    </style>
  </head>
  <body>
    <textarea id="source">

layout: true
name: white
class: black_text
background-color: white

---
layout: true
name: gray
class: white_text
background-color: #454C52

---
layout: true
name: red
class: white_text
background-color: #C14566

---
layout: true
name: green
class: white_text
background-color: #398277

---
layout: true
name: purple
class: white_text
background-color: #403D58

---
layout: true
name: yellow
class: black_text
background-color: #FFD45E

---
layout: true
name: blue
class: white_text
background-color: #4299bf

---
template: white
# Birth of the Ferris keyboard
<br>
<br>
### A journey through the world of hobbyist mechanical keyboards
<br>
<br>
#### .gray_text[Pierre Chevalier, Software Engineer, Tooling at Twitter]
#### .gray_text[ÔÇô @pierrec83]
#### .gray_text[Ô≠Æ pierrec#0083]
#### .gray_text[ÔÇõ pierrechevalier83]
???
Hi, I'm Pierre. I'm a Software Engineer at Twitter.

This year, I dove head first in the world of mechanical keyboards and some really interesting things happened.

I would like to share with you some of the journey I've been on.

Before I go much further, let me issue a disclaimer that all the work presented here was done in my spare time. My views and opinions are my own and I am not representing Twitter in this talk.

---
template: yellow
# TL;DR

.fitted-pic[![ferris_compact_glam](assets/images/ferris_compact_glam.jpg)]

???
Spoiler: it ends with me designing this keyboard that I named the Ferris, after the rust mascot.
But let's step back and let me tell you how it got to that point.

---
template: gray
# A year ago...
<br><br>


* Moderate interest in computer keyboards

???
A year ago, I would say I had a pretty typical relationship to my computer keyboard for a software engineer.
I used a pretty "standard" mechanical keyboard: the filco majestouch, with Cherry MX brown swiches.
I used the qwerty layout and didn't know how to touch type, so my typing speeds hovered around 50 words per minute.


--
count:false

* Never used a soldering iron

* Never designed any hardware

???
I had never done any hardware related project, so I didn't know how to solder or how to design a PCB.
--
count:false

* ü§ç Open-Source


* üíô KISS (Keep It Simple, Stupid)

???
I did love open-source, and in particular, the "keep it simple, stupid" philosophy of writing software in a minimalistic way.

--
count:false

* üíö Rust Programming Language

???
Rust was and still is my favourite programming language. In particular, I find its mascot, Ferris the crab to be adorable.

--
count:false

* That one friend...

???
I had that one friend who was quite interested in mechanical keyboards and kept telling me about new keyboards he was getting.
I didn't really get why he would need more than one.

---
template: red
# Listening to that one friend
<br><br>

* FOSDEM 2020

???
In February, I met my friend in person at FOSDEM. That was before the travel restrictions in Europe started to get serious.

--
count: false
* Kyria

    * 50 keys
    * Columnar stagger
    * Split keyboard
    * Extremely customizable (switches, keycaps, case, etc.)
    * Do it yourself

???

He told me how he was getting a Kyria keybord which was a split, 50 keys keyboard with columnar stagger that you had to solder yourself.
He explained how there were many axis of decisions when picking a keyboard and that there were many varieties of keyboards addressing most combinations one might want to experiment with.

---
template: green
# Reading the docs

.fitted-pic[![splitkb_doc](assets/images/splitkb_doc.png)]

???

My friend was passionate enough that he started seriously triggering my curiosity, so I spent a fair deal of time browsing the documentation from the website that sold the keyboard he was getting.

That was my entrypoint in the world of custom keyboards.

---
template: purple
# Initiation
* Stagger
    * Row stagger (typical)
    * Ortholinear (no stagger: all keys are aligned in x and y)
    * Columnar stagger (keys line up in columns and not in rows)

???

I learnt about the many design aspects that distinguish custom keyboards.
One of them is the stagger, which describes how the keys are aligned.
Traditionally, the keys line up in rows. That's called a row stagger.

Some keyboards have all the keys lined up by row and column. That's called an ortholinear stagger.

Some keyboards have the keys lined up by columns, with the columns at different heights. That's called a columnar stagger.

--
count: false

* Number of keys
    * 100% (all keys, about 100 of them)
    * TKL-80% (Ten Key Less: remove the number pad. Around 80-90 keys)
    * 60% (Remove the function row and the arrow keys)
    * 40% (Remove the number row. Mostly just alpha keys and a few modifiers)

???

Typical keyboards have about a hundred keys including function keys, the number row, arrow keys and the number pad.
The assumption is that most keys can be accessed with one strike, but it may be difficult to reach some of these keys while touch typing.

Other designs use less and less keys so that the fingers don't need to move far away from their home positions. To keep everything accessible, the user can use combination of keys to access non-alpha functions like a number pad.

--
count: false

* Keycaps
    * Many profiles
    * Different textures
--
count: false

* Switches
    * Feel: clicky, tactile, linear
    * Profile: high profile, low profile
    * Brand: Cherry MX, Kailh, Gateron,...
    * Modding: spring swapping, lubing, ...

???
Keycaps and swiches come in many flavours and can strongly influence the feel of a keyboard.
---
count:false
template: purple
# Initiation

* Firmware
    * QMK firmware: fully configurable, GPL-licensed firmwa:re
    * ZMK (supports bluetooth keyboards)
    * More niche options

???
There are many options for the firmware, although QMK is by far the most common and supports most custom keyboards under the sun.

It is written in C and allows the user to modify about every aspect of how their keyboard behaves.
--
count:false

* Keymaps
    * Alpha layout (qwerty, dvorak, coleman, coleman-DH, workman, rsthd, ...)
    * Layers
    * Combos

???
Almost every custom keyboard user uses their own keyboard keymap.
There is a large variety of base layouts to choose from, starting from the most famous ones to lesser known options.

The part that is very personal is how everyone lays out the layers so they can access numbers, function keys, symbols, arrow keys etc.

--
count:false

* ...

???
The list goes on

---
template:purple
count:false
# Intiation

.fitted-pic[![bomtarnes_collection](assets/images/bomtarnes_collection.jpeg)]
"Gotta catch em all (late 2020 edition)" by u/bomtarnes

???
This picture should give you a hint at the wide variety that there is out there. Shout out to bomtarnes from the MechanicalKeyboards subreddit who allowed me to use this picture of their collection to make this point.

---
template:blue
# The point of no-return
<br>
### If I accept a steep learning curve, what does the optimal keyboard for me look like?
<br>
???
As I learnt about all these design aspects, I started realizing that the most common keyboards that we are used to are mostly as they are due to legacy reasons.

I started considering seriously what would be a perfect keyboard for me if I was willing to accept to totally relearn how to type.

--
count: false

* Split, columnar stagger

???
By reading about it, I convinced myself that a split keyboard would allow a more natural typing position as the halves can be positionned near shoulder width and the angle can be adjusted to keep the wrist's straight.

Columnar stagger made sense to me too as I had trouble trying to reach some keys like "b" and "y" when trying to touch type on a normal keyboard.

--
count: false

* 50 keys or less (with smart use of layers)

???
I was also convinced that having less keys to reduce the overall finger travel would make touch typing easier.

--
count: false

* Workman layout (heavy use of the homerow, reduced side-index travel)

???
From reading about the most common keyboard layouts, I thought workman was a good fit for me as there was an emphasis on reducing side motion for the index fingers which sounded comfortable to me.


--
count: false

* Switches, keycaps... Need experimentation

???
As I hadn't tried many switches and keycaps, I decided that I should try a few varieties before knowing what was good for me. For that reason, I decided that having the ability to hotswap the keys on my keyboard was important for me.
---
template:white
# Waiting for my Kyria

.fitted-pic[![learn_soldering](assets/images/learn_soldering.jpg)]

???
So I ordered a Kyria keyboard. There was a waiting time of about two months between ordering and receiving my kit, so I used the time to start learning touch typing in the workman layout on specialized websites.

I ordered a soldering kit and also a cheap pcb kit to practice my soldering before getting the keyboard.
---
count:false
template:white
# Waiting for my Kyria

.fitted-pic[![first_soldering](assets/images/first_soldering.jpg)]

???
That was surprisingly easier than I had expected. I was able to get all the LEDs to blink, which gave me some confidence.

---
template: yellow
# Getting the Kyria
.fitted-pic[![kyria_package](assets/images/kyria_package.jpg)]

???
Eventually, my box arrived and I got to assemble my first keyboard.

---
template: yellow
count: false
# Getting the Kyria
.fitted-pic[![kyria_soldering](assets/images/kyria_soldering.jpg)]

???
I assembled the keyboard, which was quite approachable as the process is very well documented on the vendor's website.
---
template: yellow
count: false
# Getting the Kyria
.fitted-pic[![kyria_right_hand](assets/images/kyria_right_hand.jpg)]

???
A short time later, I had a new toy. My typing speeds reduced to around 20 words per minute, but I started using it and improving the layout as I went.

---
template: yellow
count: false
# Getting the Kyria

.fitted-pic[![sanded_wristrests](assets/images/sanded_wristrests.jpg)]
???
I carved myself a couple of wrist rests from a log of wood I picked up in a park

---
template: yellow
count: false
# Getting the Kyria
.fitted-pic[![sexy_kyria_with_wristrests](assets/images/sexy_kyria_with_wristrests.jpg)]

???
And there was the most comfortable keyboard setup I had ever used.

It took some time to get used to it and to get to typing at comfortable speeds, partly because I also changed layout to workman from qwerty, but the comfort gains were instant and dramatically noticeable.

---
template: yellow
count:false
# Getting the Kyria
.fitted-pic[![kyria_workstation](assets/images/kyria_workstation.jpg)]

???
Notice that I also stopped using a separate mouse as I switched to using another layer on the keyboard for moving the cursor with the same finger placement used for the arrow keys.

---
template: gray
# Lessons learnt

* Inherent simplicity of a keyboard

???
As my first experience of using a custom keyboard, I learnt a few things.
First of all, by building the keyboard myself, I got a first hand experience at how simple a keyboard actually is:
A printed circuit board, a few components to solder on top of it, a bit of fimware and voila. It's a functional keyboard.

Everything came in a kit, and with detailed documentation, which made the process of assembling the keyboard much easier than it may seem.

--
count: false

* Keymap optimization

???
Once I had swiched to the Kyria as my daily driver, I started iterating very frequently on the keymap I used and I also learnt some lessons here. First of all, I noticed that using layers, a high number of keys was not needed and indeed, using the same fingers closer to their home position most of the time was actually beneficial over moving the fingers further away. For that reason, 50 keys started to look like more than what's actually necessary for a comfortable experience.

--
count: false

* All the features

	* Rotary encoders
	* RGB backlight
	* OLED displays
	* Case
	* Hotswappable switches
	* Support for different types of switches
???
By design, the Kyria supports many features of custom mechanical keyboards, so I got to play with each of them and get a feel for what they brought to the experience of using the keyboard.

--
count: false

* Not a cheap endeavour (~350$ total)
???
I also realized that opting in all the features had a financial cost as the keyboard total cost me between 300 and 400 dollars

---
template: red
# Exploring further
.fitted-pic[![gherkin_pcbs](assets/images/gherkin_pcbs.jpg)]

???
Having realized how little there was to building a keyboard, I was interested to try a more hands-on experience.

I took an open-source design that I liked for its simplicity: the gherkin, which is a 30 key ortholinear keyboard and decided to kit a few myself to get comfortable with the entire process.

I had some PCBs printed from jlcpcb, a chineese website.

---
template: red
count: false
# Exploring further
.fitted-pic[![soldering_gherkin](assets/images/soldering_gherkin.jpg)]

???
I sourced the components from very cheap websites such as Ali Express and assembled a few of them

---
template: red
count: false
# Exploring further
.fitted-pic[![backlit_gherkin](assets/images/backlit_gherkin.jpg)]

???
Soon enough, I had myself an ortholinear keyboard with only 30 keys to play with.

---
template: red
count: false
# Exploring further

.fitted-pic[![two_gherkins](assets/images/two_gherkins.jpg)]

???
In fact, I had a few, and splitting an order for 10 keyboards with a friend, the entire thing had cost me only about $120 for 5 keyboards.
I used them to experiment with different switches and keycaps.

---
template: green
# More lessons learnt
<br><br>

* No magic

???
At this stage, there was no magic for me to kitting a keyboard. I had been through the entire process from end-to-end and realized that there was nothing inherently difficult in it if one was patient enough to wait for parts.

--
count: false

* The right size

???
Having had time to perfect my keymaps for the gherkin and the Kyria, I realized that 30 keys was usable, but not quite comfortable as dedicated thumb keys are quite nice. 50 keys was more than necessary, and in fact more than comfortable as it incurred too much travel. The sweetspot for me was in between.

--
count: false
* Stagger

???
Comparing the Kyria and the gherkin, the Kyria was much more comfortable to use, mainly due to the pronounced columnar stagger.

--
count: false
* Costs

???
Another lesson I learnt was that printing a custom PCB is actually quite affordable, so the main component to a custom keyboard cost are how many features it has (meaning more components must be used) and how many keys it has.

--
count: false

* Stronger together

???
I also loved that the gherkin design was open-source, which meant I didn't need to ask for anyone's permission to print a few and experiment with it.

---
template: purple
# What if?
<br>
### If I was willing to invest the time in learning about PCB design, what would the optimal keyboard for me look like?
<br>
???
As I now understood what it took to go from an existing PCB design to 
an actual usable keyboard, even without the help of a vendor selling a ready to build kit, I started wondering what I would do if I magically could design my own PCB.

--
count: false

* Open-source, simple, low-cost, portable as a gherkin

* Comfortable as a Kyria

???
Could I design a keyboard that would be as cheap and simple as a gherkin while being as comfortable as a Kyria?

---
template: blue
# The concept
<br><br>

???
As I considered this question, it became very clear in my mind what I would need to do.


--
count: false

* Same key positions as the Kyria

???
By borrowing the column stagger from the Kyria, I could get a similar amount of comfort

--
count: false

* Remove all keys that are "hard to reach" (opinion)

???
By removing all the keys that are further from the home position, I could even make the layout more comfortable than on the Kyria.

This relies on the user being comfortable with more complex keymaps, which looses some mass-appeal, but the aim was just to make a perfect keyboard for me, not a commercial success

--
count: false

* Remove all features (*)
  * That the user doesn't want
  * From any single PCB design

???
To lower the costs, and in the spirit of the KISS philosophy, any board could be designed with the absolute minimal number of feature the user of the keyboard wanted.

This should lead to a design that is so simple that a user particularly interested in any given feature could in theory easily re-use the design and modify it to achieve their own goals.

---
template: white
# Design

.fitted-pic[![early_pcb_design](assets/images/early_pcb_design.jpg)]
???
I started following an online tutorial on PCB design. My vision for was I wanted was extremely clear: a keyboard that only types, with the keys in a certain position. 

---
template: white
count: false
# Design
.fitted-pic[![park_pcb_design](assets/images/park_pcb_design.jpg)]

???
I used every spare moment I had to progress the design

---
template: white
count: false
# Design
.fitted-pic[![ferris_design_evolution_0](assets/images/ferris_design_evolution_0.jpg)]
???
Until eventually, I had what looked to me like a viable draft.

---
template: white
count: false
# Design
.fitted-pic[![ferris_design_evolution_1](assets/images/ferris_design_evolution_1.jpg)]

???
I iterated on the design a little bit, simplifying the lines

---
template: white
count: false
# Design

.fitted-pic[![ferris_design_evolution_2](assets/images/ferris_design_evolution_2.jpg)]

???
I even changed my mind on the number of keys and removed a thumb key from each hand as the design could look more minimalistic
---
template: white
count: false
# Design
.fitted-pic[![ferris_design_evolution_3](assets/images/ferris_design_evolution_3.jpg)]

???
Until I finalized on a design I was happy with: it was about as simple as I could make it.
---
template: yellow
# First order
.fitted-pic[![jlcpcb](assets/images/jlcpcb.jpg)]

???
By that time, I had become somewhat active on a few discord servers related to custom mechanical keyboards.

Before I placed an order for PCBs, I asked for help and had some community members review my design.

They helped me identify a few problems that I could fix before ordering a first print.

---
template: yellow
count: false
# First order

.fitted-pic[![ferris_pcbs](assets/images/ferris_pcbs.jpg)]

???
I eventually received my first 5 Ferris PCBs. I had added some artwork to tie the keyboard to its name. I really liked how it came out, with a small copper pad visible at the front of the PCB and larger drawings on the silkscreen on the backside.

---
template: yellow
count: false
# First order
.fitted-pic[![ferris_components](assets/images/ferris_components.jpg)]

???
I also received all of the components. Having kitted the gherkins earlier, I had gained a bit of experience in sourcing components, so this process wasn't too scary.

---
template: yellow
count: false
# First order
.fitted-pic[![soldered_ferris](assets/images/soldered_ferris.jpg)]

???
I got to assemble the first ever Ferris keyboard, and to write some firmware to make it  a working keyboard.

I wrote the firmware using QMK, which means that I could mostly write high level C code with all the business logic being handled by the QMK project itself.

It also meant that anyone using this keyboard could use the same firmware they were probably already familiar with.

---
template: yellow
count: false
# First order
.fitted-pic[![assembled_ferris](assets/images/assembled_ferris.jpg)]

???
Soon enough, I had my new daily driver keyboard.
It was minimalistic, with only the exposed PCB, the electronic circuit and the switches.
All the switches were positioned to a place where they were easy to reach.
It was the most comfortable keyboard I had ever used.

---
template: gray
# Selling the extras
.fitted-pic[![ferris_wheel](assets/images/ferris_wheel.jpg)]

???
When one orders PCBs and components, there is generally a minimum order quantity of 5, so after building my own keyboard, I had a few more kits on my hands.

---
template: gray
count: false
# Selling the extras
.fitted-pic[![ferris_glam_0](assets/images/ferris_glam_0.jpg)]

???
I took a few glam shots of my new keyboard

---
template: gray
count: false
# Selling the extras
.fitted-pic[![ferris_glam_1](assets/images/ferris_glam_1.jpg)]

???
And shared them online in some of the custom keyboard channels that I had started to frequent.

I found my first 4 clients quite rapidly and shipped them the kits.

---
template: red
# Popular demand

.fitted-pic[![more_ferris_pcbs](assets/images/more_ferris_pcbs.jpg)]

???
Since I had shared the pictures online, I had more and more people express interest in getting one, so I placed a larger order for PCBs

---
template: red
count: false
# Popular demand

.fitted-pic[![more_components](assets/images/more_components.jpg)]


???
and for components

---
template: red
count: false
# Popular demand

.fitted-pic[![packaging](assets/images/packaging.jpg)]

???
Because I cared and wanted to give joy to people receiving their keyboards, I designed a packaging system aiming to give a nice unboxing experience.

---
template: red
count: false
# Popular demand

.fitted-pic[![many_boms](assets/images/many_boms.jpg)]

???
I started kitting all these keyboards people wanted to buy from me.

---
template: red
count: false
# Popular demand

.fitted-pic[![boxes](assets/images/boxes.jpg)]

???
And prepared everyone's packages with love and care.

---
template: green
# Vox populi

.fitted-pic[![ferris_pads](assets/images/ferris_pads.jpg)]

???
People online loved the minimalistic design, but some of them started to ask for a different feature set.

For example. People were interested in lower profile or higher profile switches.

In the spirit of my initial minimalistic ideals, instead of adding more options to the board I had designed, I created variants of the design to accomodate for differrent taste.

I was already starting to benefit from the choice of going open-source too as the community helped me design some of these variants.

---
template: green
count: false
# Vox populi

.fitted-pic[![profiles](assets/images/profiles.jpg)]

???
And this is how the first two Ferris variants: Ferris High and Ferris Low came to be.

---
template: purple
# Meet the Ferris family
.fitted-pic[![ferris_variants](assets/images/ferris_variants.jpg)]

???
Today, I designed 8 variants of the Ferris keyboard. 4 of them have already been printed and assembled. I am working on finalizing four new variants.

Since the entire design is open-source, there are already at least two variants that others have designed, and a few more in the works.

---
template: blue
# Yet more lessons learnt
<br><br>

* The power of open-source

???
In this entire experience, I've been in touch with other custom keyboards enthusiasts, mostly on discord.
We shared perspectives on all kinds of aspects from keyboard design to keymaps.
Some people have helped me learn about electronic circuits.
Some have designed 3d printed cases for it.
Some have contributed new designs inspired by the Ferris.
Some have sourced the components and PCBs for themselves.

---
template: blue
count: false
# Yet more lessons learnt
<br><br>

* The power of open-source

* Labour of love

???
While I was very lucky to find like-minded people who were willing to buy kyeboard kits from me, and I made sure to cover my costs with the keyboards I sold, there is no way to describe this endeavour as profitable if you count the time I spent designing, iterating, documenting, packing kits etc.

Like many open-source projects, I did it because I was passionate about learning more and more, and I was happy to share the results with people who would enjoy it.

--
count: false

* The best keyboard for me

???
An important consideration is that I tried to design the best keyboard for me, and not a crowd-pleaser. That allowed me to keep the costs low and to stick to a minimalistic philosophy.

I believe what came out of this approach is a great product for the few people who share my taste.

--
count: false

* Evolution

???
As I have been having so much fun designing keyboards, the story of the Ferris doesn't end here. I am currently working on 4 variants of the keyboard based on a different chip architecture (I'm switching to arm).

Eventually, I plan to write pure rust firmware to match the branding of the keyboard.

---
template: white
# Thank you! Any questions?
<br><br>
#### .gray_text[ÔÇô @pierrec83]
#### .gray_text[Ô≠Æ pierrec#0083]
#### .gray_text[ÔÇõ pierrechevalier83]
<br>
#### .gray_text[github.com/pierrechevalier83/talk_05_12_2020]
#### .gray_text[github.com/pierrechevalier83/ferris]

    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create({
		ratio: '16:9',
        highlightLanguage: 'rust',
        highlightLines: 'true',
        highlightSpans: 'true'
	  });
    </script>
  </body>
</html>

